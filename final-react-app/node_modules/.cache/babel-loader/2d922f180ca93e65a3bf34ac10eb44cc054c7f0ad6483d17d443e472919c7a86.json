{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\danie\\\\Desktop\\\\ALIGN MSCS Files\\\\CS 5610 - Web Development\\\\spring23\\\\final-project\\\\final-react-app\\\\src\\\\reviews\\\\review-item-component.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { findUserByID } from \"../services/users-services\";\nimport { getBookDetailsByID } from \"../services/openlib-services\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst COVER_SOURCE = \"https://covers.openlibrary.org/b/id\";\nconst ReviewItemComponent = _ref => {\n  _s();\n  let {\n    review,\n    isUserList\n  } = _ref;\n  const [user, setUser] = useState(null);\n  const [book, setBook] = useState(null);\n  const [editing, setEditing] = useState(false);\n  const [newReview, setNewReview] = useState(review.text);\n  const fetchUser = async () => {\n    const response = await findUserByID(review.uid);\n    setUser(response);\n  };\n  const fetchBook = async () => {\n    const response = await getBookDetailsByID(review.bid);\n    setBook(response);\n  };\n  const saveEdits = async () => {\n    setEditing(false);\n    if (newReview.length > 0) {\n      review.text = newReview;\n    } else {\n      setNewReview(review.text);\n    }\n  };\n  useEffect(() => {\n    fetchUser();\n    fetchBook();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: user && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"list-group-item bg-light flex-column align-items-start\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-2\",\n            children: isUserList && book ? /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"m-2\",\n              src: `${COVER_SOURCE}/${book.covers[0]}-M.jpg`,\n              width: 64,\n              height: 96\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"rounded-circle m-2\",\n              src: `${user.profilePic}`,\n              width: 96,\n              height: 96\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-10\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex w-100 justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"mb-1 col-10\",\n                children: [/*#__PURE__*/_jsxDEV(Link, {\n                  to: `/profile/${user._id}`,\n                  className: \"text-decoration-none text-dark\",\n                  children: user.username\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 55,\n                  columnNumber: 37\n                }, this), \"'s review of\", book && /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      to: `/details/works/${review.bid}`,\n                      className: \"text-decoration-none text-dark\",\n                      children: \" \" + book.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 58,\n                      columnNumber: 47\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 58,\n                    columnNumber: 44\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 58,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 54,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                children: editing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    onClick: () => saveEdits(),\n                    children: \"Save\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 61,\n                    columnNumber: 50\n                  }, this), \" | Cancel\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    onClick: () => setEditing(true),\n                    children: \"Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 62,\n                    columnNumber: 50\n                  }, this), \" | Delete\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 29\n            }, this), editing ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"form-control\",\n              rows: 4,\n              value: newReview,\n              placeholder: \"Editing review...\",\n              onChange: e => setNewReview(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mb-1\",\n              children: review.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 35\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              children: new Date(review.reviewDate.slice(0, 10)).toLocaleDateString('en-us', {\n                year: \"numeric\",\n                month: \"short\",\n                day: \"numeric\"\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }, this)\n    }, void 0, false)\n  }, void 0, false);\n};\n_s(ReviewItemComponent, \"5V8Est/WjM9UtCR+kQsRlY+nHpk=\");\n_c = ReviewItemComponent;\nexport default ReviewItemComponent;\n\n//(is this id of currentuser and user is user) or user is admin\nvar _c;\n$RefreshReg$(_c, \"ReviewItemComponent\");","map":{"version":3,"names":["React","useEffect","useState","Link","findUserByID","getBookDetailsByID","jsxDEV","_jsxDEV","Fragment","_Fragment","COVER_SOURCE","ReviewItemComponent","_ref","_s","review","isUserList","user","setUser","book","setBook","editing","setEditing","newReview","setNewReview","text","fetchUser","response","uid","fetchBook","bid","saveEdits","length","children","className","src","covers","width","height","fileName","_jsxFileName","lineNumber","columnNumber","profilePic","to","_id","username","title","onClick","rows","value","placeholder","onChange","e","target","Date","reviewDate","slice","toLocaleDateString","year","month","day","_c","$RefreshReg$"],"sources":["C:/Users/danie/Desktop/ALIGN MSCS Files/CS 5610 - Web Development/spring23/final-project/final-react-app/src/reviews/review-item-component.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {findUserByID} from \"../services/users-services\";\r\nimport {getBookDetailsByID} from \"../services/openlib-services\";\r\n\r\nconst COVER_SOURCE = \"https://covers.openlibrary.org/b/id\"\r\nconst ReviewItemComponent = ({review, isUserList}) => {\r\n\r\n    const [user, setUser] = useState(null)\r\n    const [book, setBook] = useState(null);\r\n    const [editing, setEditing] = useState(false);\r\n    const [newReview, setNewReview] = useState(review.text);\r\n\r\n    const fetchUser = async () => {\r\n        const response = await findUserByID(review.uid)\r\n        setUser(response);\r\n    }\r\n    const fetchBook = async () => {\r\n        const response = await getBookDetailsByID(review.bid);\r\n        setBook(response);\r\n    }\r\n\r\n    const saveEdits = async () => {\r\n        setEditing(false);\r\n        if(newReview.length > 0){\r\n            review.text = newReview;\r\n        }\r\n        else{\r\n            setNewReview(review.text);\r\n        }\r\n    }\r\n\r\n    useEffect( () => {\r\n            fetchUser();\r\n            fetchBook();\r\n        }, [])\r\n\r\n    return(\r\n        <>\r\n        {user &&\r\n            <>\r\n\r\n\r\n                <div className=\"list-group-item bg-light flex-column align-items-start\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-2\">\r\n                            {isUserList && book ?\r\n                                <img className=\"m-2\" src={`${COVER_SOURCE}/${book.covers[0]}-M.jpg`} width={64} height={96}/> :\r\n                                <img className=\"rounded-circle m-2\" src={`${user.profilePic}`} width={96} height={96}/>}\r\n\r\n                        </div>\r\n                        <div className=\"col-10\">\r\n                            <div className=\"d-flex w-100 justify-content-between\">\r\n                                <h5 className=\"mb-1 col-10\">\r\n                                    <Link to={`/profile/${user._id}`}\r\n                                          className=\"text-decoration-none text-dark\">{user.username}</Link>'s review of\r\n                                    {book &&\r\n                                        <b><i><Link to={`/details/works/${review.bid}`} className=\"text-decoration-none text-dark\">{\" \" + book.title}</Link></i></b>}\r\n                                </h5>\r\n                                <small>\r\n                                    {editing ? <><span onClick={()=> saveEdits()}>Save</span> | Cancel</> :\r\n                                               <><span onClick={()=> setEditing(true)}>Edit</span> | Delete</>}\r\n                                </small>\r\n                            </div>\r\n                            {editing ?\r\n                                <textarea className=\"form-control\" rows={4}\r\n                                          value={newReview} placeholder=\"Editing review...\"\r\n                                          onChange={(e) => setNewReview(e.target.value)}>\r\n                                </textarea>\r\n                                : <p className=\"mb-1\">{review.text}</p>}\r\n                            <small>\r\n                                {\r\n                                    new Date(review.reviewDate.slice(0, 10)).toLocaleDateString('en-us', {year:\"numeric\", month:\"short\", day:\"numeric\"})\r\n                                }\r\n                            </small>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </>\r\n        }\r\n        </>\r\n\r\n\r\n    )\r\n}\r\n\r\nexport default ReviewItemComponent;\r\n\r\n//(is this id of currentuser and user is user) or user is admin"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}